{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@flarum/emoji/webpack/bootstrap","webpack://@flarum/emoji/webpack/runtime/compat get default export","webpack://@flarum/emoji/webpack/runtime/define property getters","webpack://@flarum/emoji/webpack/runtime/hasOwnProperty shorthand","webpack://@flarum/emoji/webpack/runtime/make namespace object","webpack://@flarum/emoji/external root \"flarum.reg.get('core', 'forum/app')\"","webpack://@flarum/emoji/external root \"flarum.reg.get('core', 'common/extend')\"","webpack://@flarum/emoji/external root \"flarum.reg.get('core', 'common/components/TextEditor')\"","webpack://@flarum/emoji/external root \"flarum.reg.get('core', 'common/components/TextEditorButton')\"","webpack://@flarum/emoji/external root \"flarum.reg.get('core', 'common/utils/KeyboardNavigatable')\"","webpack://@flarum/emoji/../../../js-packages/webpack-config/node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@flarum/emoji/../../../js-packages/webpack-config/node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@flarum/emoji/../../../js-packages/webpack-config/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@flarum/emoji/../../../js-packages/webpack-config/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@flarum/emoji/external root \"flarum.reg.get('core', 'common/Fragment')\"","webpack://@flarum/emoji/./src/forum/fragments/AutocompleteDropdown.js","webpack://@flarum/emoji/../../../node_modules/twemoji/dist/twemoji.esm.js","webpack://@flarum/emoji/./src/forum/helpers/getEmojiIconCode.js","webpack://@flarum/emoji/./src/forum/cdn.js","webpack://@flarum/emoji/external root \"flarum.reg.get('core', 'common/models/Post')\"","webpack://@flarum/emoji/./src/forum/renderEmoji.js","webpack://@flarum/emoji/./src/forum/index.js","webpack://@flarum/emoji/./src/forum/addComposerAutocomplete.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/app');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extend');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/TextEditor');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/TextEditorButton');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/KeyboardNavigatable');","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Fragment');","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Fragment from 'flarum/common/Fragment';\nexport default class AutocompleteDropdown extends Fragment {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"items\", []);\n    _defineProperty(this, \"active\", false);\n    _defineProperty(this, \"index\", 0);\n    _defineProperty(this, \"keyWasJustPressed\", false);\n  }\n  view() {\n    return m(\"ul\", {\n      className: \"Dropdown-menu EmojiDropdown\"\n    }, m(\"li\", {\n      className: \"Dropdown-header\"\n    }, app.translator.trans('flarum-emoji.forum.composer.type_to_search_text')), this.items.map(item => m(\"li\", {\n      key: item.attrs.key\n    }, item)));\n  }\n  show(left, top) {\n    this.$().show().css({\n      left: left + 'px',\n      top: top + 'px'\n    });\n    this.active = true;\n  }\n  hide() {\n    this.$().hide();\n    this.active = false;\n  }\n  navigate(delta) {\n    this.keyWasJustPressed = true;\n    this.setIndex(this.index + delta, true);\n    clearTimeout(this.keyWasJustPressedTimeout);\n    this.keyWasJustPressedTimeout = setTimeout(() => this.keyWasJustPressed = false, 500);\n  }\n  complete() {\n    this.$('li:not(.Dropdown-header)').eq(this.index).find('button').click();\n  }\n  setIndex(index, scrollToItem) {\n    if (this.keyWasJustPressed && !scrollToItem) return;\n    const $dropdown = this.$();\n    const $items = $dropdown.find('li:not(.Dropdown-header)');\n    let rangedIndex = index;\n    if (rangedIndex < 0) {\n      rangedIndex = $items.length - 1;\n    } else if (rangedIndex >= $items.length) {\n      rangedIndex = 0;\n    }\n    this.index = rangedIndex;\n    const $item = $items.removeClass('active').eq(rangedIndex).addClass('active');\n    if (scrollToItem) {\n      const dropdownScroll = $dropdown.scrollTop();\n      const dropdownTop = $dropdown.offset().top;\n      const dropdownBottom = dropdownTop + $dropdown.outerHeight();\n      const itemTop = $item.offset().top;\n      const itemBottom = itemTop + $item.outerHeight();\n      let scrollTop;\n      if (itemTop < dropdownTop) {\n        scrollTop = dropdownScroll - dropdownTop + itemTop - parseInt($dropdown.css('padding-top'), 10);\n      } else if (itemBottom > dropdownBottom) {\n        scrollTop = dropdownScroll - dropdownBottom + itemBottom + parseInt($dropdown.css('padding-bottom'), 10);\n      }\n      if (typeof scrollTop !== 'undefined') {\n        $dropdown.stop(true).animate({\n          scrollTop\n        }, 100);\n      }\n    }\n  }\n}\nflarum.reg.add('flarum-emoji', 'forum/fragments/AutocompleteDropdown', AutocompleteDropdown)","/*! Copyright Twitter Inc. and other contributors. Licensed under MIT */\nvar twemoji=function(){\"use strict\";var twemoji={base:\"https://twemoji.maxcdn.com/v/14.0.2/\",ext:\".png\",size:\"72x72\",className:\"emoji\",convert:{fromCodePoint:fromCodePoint,toCodePoint:toCodePoint},onerror:function onerror(){if(this.parentNode){this.parentNode.replaceChild(createText(this.alt,false),this)}},parse:parse,replace:replace,test:test},escaper={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",\"'\":\"&#39;\",'\"':\"&quot;\"},re=/(?:\\ud83d\\udc68\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffc-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83e\\uddd1\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83e\\uddd1\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc68\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffc-\\udfff]|\\ud83d\\udc68\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83d\\udc68\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83d\\udc68\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83d\\udc68\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffc-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffc-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udffe]|\\ud83e\\uddd1\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffc-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83e\\uddd1\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83e\\uddd1\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffe]|\\ud83e\\uddd1\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68|\\ud83d\\udc69\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d[\\udc68\\udc69]|\\ud83e\\udef1\\ud83c\\udffb\\u200d\\ud83e\\udef2\\ud83c[\\udffc-\\udfff]|\\ud83e\\udef1\\ud83c\\udffc\\u200d\\ud83e\\udef2\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83e\\udef1\\ud83c\\udffd\\u200d\\ud83e\\udef2\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83e\\udef1\\ud83c\\udffe\\u200d\\ud83e\\udef2\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83e\\udef1\\ud83c\\udfff\\u200d\\ud83e\\udef2\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc68\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68|\\ud83d\\udc69\\u200d\\u2764\\ufe0f\\u200d\\ud83d[\\udc68\\udc69]|\\ud83e\\uddd1\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1|\\ud83d\\udc6b\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc6c\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc6d\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc8f\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc91\\ud83c[\\udffb-\\udfff]|\\ud83e\\udd1d\\ud83c[\\udffb-\\udfff]|\\ud83d[\\udc6b-\\udc6d\\udc8f\\udc91]|\\ud83e\\udd1d)|(?:\\ud83d[\\udc68\\udc69]|\\ud83e\\uddd1)(?:\\ud83c[\\udffb-\\udfff])?\\u200d(?:\\u2695\\ufe0f|\\u2696\\ufe0f|\\u2708\\ufe0f|\\ud83c[\\udf3e\\udf73\\udf7c\\udf84\\udf93\\udfa4\\udfa8\\udfeb\\udfed]|\\ud83d[\\udcbb\\udcbc\\udd27\\udd2c\\ude80\\ude92]|\\ud83e[\\uddaf-\\uddb3\\uddbc\\uddbd])|(?:\\ud83c[\\udfcb\\udfcc]|\\ud83d[\\udd74\\udd75]|\\u26f9)((?:\\ud83c[\\udffb-\\udfff]|\\ufe0f)\\u200d[\\u2640\\u2642]\\ufe0f)|(?:\\ud83c[\\udfc3\\udfc4\\udfca]|\\ud83d[\\udc6e\\udc70\\udc71\\udc73\\udc77\\udc81\\udc82\\udc86\\udc87\\ude45-\\ude47\\ude4b\\ude4d\\ude4e\\udea3\\udeb4-\\udeb6]|\\ud83e[\\udd26\\udd35\\udd37-\\udd39\\udd3d\\udd3e\\uddb8\\uddb9\\uddcd-\\uddcf\\uddd4\\uddd6-\\udddd])(?:\\ud83c[\\udffb-\\udfff])?\\u200d[\\u2640\\u2642]\\ufe0f|(?:\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83c\\udff3\\ufe0f\\u200d\\u26a7\\ufe0f|\\ud83c\\udff3\\ufe0f\\u200d\\ud83c\\udf08|\\ud83d\\ude36\\u200d\\ud83c\\udf2b\\ufe0f|\\u2764\\ufe0f\\u200d\\ud83d\\udd25|\\u2764\\ufe0f\\u200d\\ud83e\\ude79|\\ud83c\\udff4\\u200d\\u2620\\ufe0f|\\ud83d\\udc15\\u200d\\ud83e\\uddba|\\ud83d\\udc3b\\u200d\\u2744\\ufe0f|\\ud83d\\udc41\\u200d\\ud83d\\udde8|\\ud83d\\udc68\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc6f\\u200d\\u2640\\ufe0f|\\ud83d\\udc6f\\u200d\\u2642\\ufe0f|\\ud83d\\ude2e\\u200d\\ud83d\\udca8|\\ud83d\\ude35\\u200d\\ud83d\\udcab|\\ud83e\\udd3c\\u200d\\u2640\\ufe0f|\\ud83e\\udd3c\\u200d\\u2642\\ufe0f|\\ud83e\\uddde\\u200d\\u2640\\ufe0f|\\ud83e\\uddde\\u200d\\u2642\\ufe0f|\\ud83e\\udddf\\u200d\\u2640\\ufe0f|\\ud83e\\udddf\\u200d\\u2642\\ufe0f|\\ud83d\\udc08\\u200d\\u2b1b)|[#*0-9]\\ufe0f?\\u20e3|(?:[©®\\u2122\\u265f]\\ufe0f)|(?:\\ud83c[\\udc04\\udd70\\udd71\\udd7e\\udd7f\\ude02\\ude1a\\ude2f\\ude37\\udf21\\udf24-\\udf2c\\udf36\\udf7d\\udf96\\udf97\\udf99-\\udf9b\\udf9e\\udf9f\\udfcd\\udfce\\udfd4-\\udfdf\\udff3\\udff5\\udff7]|\\ud83d[\\udc3f\\udc41\\udcfd\\udd49\\udd4a\\udd6f\\udd70\\udd73\\udd76-\\udd79\\udd87\\udd8a-\\udd8d\\udda5\\udda8\\uddb1\\uddb2\\uddbc\\uddc2-\\uddc4\\uddd1-\\uddd3\\udddc-\\uddde\\udde1\\udde3\\udde8\\uddef\\uddf3\\uddfa\\udecb\\udecd-\\udecf\\udee0-\\udee5\\udee9\\udef0\\udef3]|[\\u203c\\u2049\\u2139\\u2194-\\u2199\\u21a9\\u21aa\\u231a\\u231b\\u2328\\u23cf\\u23ed-\\u23ef\\u23f1\\u23f2\\u23f8-\\u23fa\\u24c2\\u25aa\\u25ab\\u25b6\\u25c0\\u25fb-\\u25fe\\u2600-\\u2604\\u260e\\u2611\\u2614\\u2615\\u2618\\u2620\\u2622\\u2623\\u2626\\u262a\\u262e\\u262f\\u2638-\\u263a\\u2640\\u2642\\u2648-\\u2653\\u2660\\u2663\\u2665\\u2666\\u2668\\u267b\\u267f\\u2692-\\u2697\\u2699\\u269b\\u269c\\u26a0\\u26a1\\u26a7\\u26aa\\u26ab\\u26b0\\u26b1\\u26bd\\u26be\\u26c4\\u26c5\\u26c8\\u26cf\\u26d1\\u26d3\\u26d4\\u26e9\\u26ea\\u26f0-\\u26f5\\u26f8\\u26fa\\u26fd\\u2702\\u2708\\u2709\\u270f\\u2712\\u2714\\u2716\\u271d\\u2721\\u2733\\u2734\\u2744\\u2747\\u2757\\u2763\\u2764\\u27a1\\u2934\\u2935\\u2b05-\\u2b07\\u2b1b\\u2b1c\\u2b50\\u2b55\\u3030\\u303d\\u3297\\u3299])(?:\\ufe0f|(?!\\ufe0e))|(?:(?:\\ud83c[\\udfcb\\udfcc]|\\ud83d[\\udd74\\udd75\\udd90]|[\\u261d\\u26f7\\u26f9\\u270c\\u270d])(?:\\ufe0f|(?!\\ufe0e))|(?:\\ud83c[\\udf85\\udfc2-\\udfc4\\udfc7\\udfca]|\\ud83d[\\udc42\\udc43\\udc46-\\udc50\\udc66-\\udc69\\udc6e\\udc70-\\udc78\\udc7c\\udc81-\\udc83\\udc85-\\udc87\\udcaa\\udd7a\\udd95\\udd96\\ude45-\\ude47\\ude4b-\\ude4f\\udea3\\udeb4-\\udeb6\\udec0\\udecc]|\\ud83e[\\udd0c\\udd0f\\udd18-\\udd1c\\udd1e\\udd1f\\udd26\\udd30-\\udd39\\udd3d\\udd3e\\udd77\\uddb5\\uddb6\\uddb8\\uddb9\\uddbb\\uddcd-\\uddcf\\uddd1-\\udddd\\udec3-\\udec5\\udef0-\\udef6]|[\\u270a\\u270b]))(?:\\ud83c[\\udffb-\\udfff])?|(?:\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc65\\udb40\\udc6e\\udb40\\udc67\\udb40\\udc7f|\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc73\\udb40\\udc63\\udb40\\udc74\\udb40\\udc7f|\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc77\\udb40\\udc6c\\udb40\\udc73\\udb40\\udc7f|\\ud83c\\udde6\\ud83c[\\udde8-\\uddec\\uddee\\uddf1\\uddf2\\uddf4\\uddf6-\\uddfa\\uddfc\\uddfd\\uddff]|\\ud83c\\udde7\\ud83c[\\udde6\\udde7\\udde9-\\uddef\\uddf1-\\uddf4\\uddf6-\\uddf9\\uddfb\\uddfc\\uddfe\\uddff]|\\ud83c\\udde8\\ud83c[\\udde6\\udde8\\udde9\\uddeb-\\uddee\\uddf0-\\uddf5\\uddf7\\uddfa-\\uddff]|\\ud83c\\udde9\\ud83c[\\uddea\\uddec\\uddef\\uddf0\\uddf2\\uddf4\\uddff]|\\ud83c\\uddea\\ud83c[\\udde6\\udde8\\uddea\\uddec\\udded\\uddf7-\\uddfa]|\\ud83c\\uddeb\\ud83c[\\uddee-\\uddf0\\uddf2\\uddf4\\uddf7]|\\ud83c\\uddec\\ud83c[\\udde6\\udde7\\udde9-\\uddee\\uddf1-\\uddf3\\uddf5-\\uddfa\\uddfc\\uddfe]|\\ud83c\\udded\\ud83c[\\uddf0\\uddf2\\uddf3\\uddf7\\uddf9\\uddfa]|\\ud83c\\uddee\\ud83c[\\udde8-\\uddea\\uddf1-\\uddf4\\uddf6-\\uddf9]|\\ud83c\\uddef\\ud83c[\\uddea\\uddf2\\uddf4\\uddf5]|\\ud83c\\uddf0\\ud83c[\\uddea\\uddec-\\uddee\\uddf2\\uddf3\\uddf5\\uddf7\\uddfc\\uddfe\\uddff]|\\ud83c\\uddf1\\ud83c[\\udde6-\\udde8\\uddee\\uddf0\\uddf7-\\uddfb\\uddfe]|\\ud83c\\uddf2\\ud83c[\\udde6\\udde8-\\udded\\uddf0-\\uddff]|\\ud83c\\uddf3\\ud83c[\\udde6\\udde8\\uddea-\\uddec\\uddee\\uddf1\\uddf4\\uddf5\\uddf7\\uddfa\\uddff]|\\ud83c\\uddf4\\ud83c\\uddf2|\\ud83c\\uddf5\\ud83c[\\udde6\\uddea-\\udded\\uddf0-\\uddf3\\uddf7-\\uddf9\\uddfc\\uddfe]|\\ud83c\\uddf6\\ud83c\\udde6|\\ud83c\\uddf7\\ud83c[\\uddea\\uddf4\\uddf8\\uddfa\\uddfc]|\\ud83c\\uddf8\\ud83c[\\udde6-\\uddea\\uddec-\\uddf4\\uddf7-\\uddf9\\uddfb\\uddfd-\\uddff]|\\ud83c\\uddf9\\ud83c[\\udde6\\udde8\\udde9\\uddeb-\\udded\\uddef-\\uddf4\\uddf7\\uddf9\\uddfb\\uddfc\\uddff]|\\ud83c\\uddfa\\ud83c[\\udde6\\uddec\\uddf2\\uddf3\\uddf8\\uddfe\\uddff]|\\ud83c\\uddfb\\ud83c[\\udde6\\udde8\\uddea\\uddec\\uddee\\uddf3\\uddfa]|\\ud83c\\uddfc\\ud83c[\\uddeb\\uddf8]|\\ud83c\\uddfd\\ud83c\\uddf0|\\ud83c\\uddfe\\ud83c[\\uddea\\uddf9]|\\ud83c\\uddff\\ud83c[\\udde6\\uddf2\\uddfc]|\\ud83c[\\udccf\\udd8e\\udd91-\\udd9a\\udde6-\\uddff\\ude01\\ude32-\\ude36\\ude38-\\ude3a\\ude50\\ude51\\udf00-\\udf20\\udf2d-\\udf35\\udf37-\\udf7c\\udf7e-\\udf84\\udf86-\\udf93\\udfa0-\\udfc1\\udfc5\\udfc6\\udfc8\\udfc9\\udfcf-\\udfd3\\udfe0-\\udff0\\udff4\\udff8-\\udfff]|\\ud83d[\\udc00-\\udc3e\\udc40\\udc44\\udc45\\udc51-\\udc65\\udc6a\\udc6f\\udc79-\\udc7b\\udc7d-\\udc80\\udc84\\udc88-\\udc8e\\udc90\\udc92-\\udca9\\udcab-\\udcfc\\udcff-\\udd3d\\udd4b-\\udd4e\\udd50-\\udd67\\udda4\\uddfb-\\ude44\\ude48-\\ude4a\\ude80-\\udea2\\udea4-\\udeb3\\udeb7-\\udebf\\udec1-\\udec5\\uded0-\\uded2\\uded5-\\uded7\\udedd-\\udedf\\udeeb\\udeec\\udef4-\\udefc\\udfe0-\\udfeb\\udff0]|\\ud83e[\\udd0d\\udd0e\\udd10-\\udd17\\udd20-\\udd25\\udd27-\\udd2f\\udd3a\\udd3c\\udd3f-\\udd45\\udd47-\\udd76\\udd78-\\uddb4\\uddb7\\uddba\\uddbc-\\uddcc\\uddd0\\uddde-\\uddff\\ude70-\\ude74\\ude78-\\ude7c\\ude80-\\ude86\\ude90-\\udeac\\udeb0-\\udeba\\udec0-\\udec2\\uded0-\\uded9\\udee0-\\udee7]|[\\u23e9-\\u23ec\\u23f0\\u23f3\\u267e\\u26ce\\u2705\\u2728\\u274c\\u274e\\u2753-\\u2755\\u2795-\\u2797\\u27b0\\u27bf\\ue50a])|\\ufe0f/g,UFE0Fg=/\\uFE0F/g,U200D=String.fromCharCode(8205),rescaper=/[&<>'\"]/g,shouldntBeParsed=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,fromCharCode=String.fromCharCode;return twemoji;function createText(text,clean){return document.createTextNode(clean?text.replace(UFE0Fg,\"\"):text)}function escapeHTML(s){return s.replace(rescaper,replacer)}function defaultImageSrcGenerator(icon,options){return\"\".concat(options.base,options.size,\"/\",icon,options.ext)}function grabAllTextNodes(node,allText){var childNodes=node.childNodes,length=childNodes.length,subnode,nodeType;while(length--){subnode=childNodes[length];nodeType=subnode.nodeType;if(nodeType===3){allText.push(subnode)}else if(nodeType===1&&!(\"ownerSVGElement\"in subnode)&&!shouldntBeParsed.test(subnode.nodeName.toLowerCase())){grabAllTextNodes(subnode,allText)}}return allText}function grabTheRightIcon(rawText){return toCodePoint(rawText.indexOf(U200D)<0?rawText.replace(UFE0Fg,\"\"):rawText)}function parseNode(node,options){var allText=grabAllTextNodes(node,[]),length=allText.length,attrib,attrname,modified,fragment,subnode,text,match,i,index,img,rawText,iconId,src;while(length--){modified=false;fragment=document.createDocumentFragment();subnode=allText[length];text=subnode.nodeValue;i=0;while(match=re.exec(text)){index=match.index;if(index!==i){fragment.appendChild(createText(text.slice(i,index),true))}rawText=match[0];iconId=grabTheRightIcon(rawText);i=index+rawText.length;src=options.callback(iconId,options);if(iconId&&src){img=new Image;img.onerror=options.onerror;img.setAttribute(\"draggable\",\"false\");attrib=options.attributes(rawText,iconId);for(attrname in attrib){if(attrib.hasOwnProperty(attrname)&&attrname.indexOf(\"on\")!==0&&!img.hasAttribute(attrname)){img.setAttribute(attrname,attrib[attrname])}}img.className=options.className;img.alt=rawText;img.src=src;modified=true;fragment.appendChild(img)}if(!img)fragment.appendChild(createText(rawText,false));img=null}if(modified){if(i<text.length){fragment.appendChild(createText(text.slice(i),true))}subnode.parentNode.replaceChild(fragment,subnode)}}return node}function parseString(str,options){return replace(str,function(rawText){var ret=rawText,iconId=grabTheRightIcon(rawText),src=options.callback(iconId,options),attrib,attrname;if(iconId&&src){ret=\"<img \".concat('class=\"',options.className,'\" ','draggable=\"false\" ','alt=\"',rawText,'\"',' src=\"',src,'\"');attrib=options.attributes(rawText,iconId);for(attrname in attrib){if(attrib.hasOwnProperty(attrname)&&attrname.indexOf(\"on\")!==0&&ret.indexOf(\" \"+attrname+\"=\")===-1){ret=ret.concat(\" \",attrname,'=\"',escapeHTML(attrib[attrname]),'\"')}}ret=ret.concat(\"/>\")}return ret})}function replacer(m){return escaper[m]}function returnNull(){return null}function toSizeSquaredAsset(value){return typeof value===\"number\"?value+\"x\"+value:value}function fromCodePoint(codepoint){var code=typeof codepoint===\"string\"?parseInt(codepoint,16):codepoint;if(code<65536){return fromCharCode(code)}code-=65536;return fromCharCode(55296+(code>>10),56320+(code&1023))}function parse(what,how){if(!how||typeof how===\"function\"){how={callback:how}}return(typeof what===\"string\"?parseString:parseNode)(what,{callback:how.callback||defaultImageSrcGenerator,attributes:typeof how.attributes===\"function\"?how.attributes:returnNull,base:typeof how.base===\"string\"?how.base:twemoji.base,ext:how.ext||twemoji.ext,size:how.folder||toSizeSquaredAsset(how.size||twemoji.size),className:how.className||twemoji.className,onerror:how.onerror||twemoji.onerror})}function replace(text,callback){return String(text).replace(re,callback)}function test(text){re.lastIndex=0;var result=re.test(text);re.lastIndex=0;return result}function toCodePoint(unicodeSurrogates,sep){var r=[],c=0,p=0,i=0;while(i<unicodeSurrogates.length){c=unicodeSurrogates.charCodeAt(i++);if(p){r.push((65536+(p-55296<<10)+(c-56320)).toString(16));p=0}else if(55296<=c&&c<=56319){p=c}else{r.push(c.toString(16))}}return r.join(sep||\"-\")}}();\nexport default twemoji;","/*! Copyright Twitter Inc. and other contributors. Licensed under MIT */ /*\n                                                                         https://github.com/twitter/twemoji/blob/gh-pages/LICENSE\n                                                                         */\n\nimport twemoji from 'twemoji';\n\n// avoid using a string literal like '\\u200D' here because minifiers expand it inline\nconst U200D = String.fromCharCode(0x200d);\n\n// avoid runtime RegExp creation for not so smart,\n// not JIT based, and old browsers / engines\nconst UFE0Fg = /\\uFE0F/g;\n\n/**\n * Used to both remove the possible variant\n *  and to convert utf16 into code points.\n *  If there is a zero-width-joiner (U+200D), leave the variants in.\n * @param   string    the raw text of the emoji match\n * @return  string    the code point\n */\nexport default function getEmojiIconCode(emoji) {\n  return twemoji.convert.toCodePoint(emoji.indexOf(U200D) < 0 ? emoji.replace(UFE0Fg, '') : emoji);\n}\nflarum.reg.add('flarum-emoji', 'forum/helpers/getEmojiIconCode', getEmojiIconCode)","import twemoji from 'twemoji';\nexport const version = /([0-9]+).[0-9]+.[0-9]+/g.exec(twemoji.base)[1];\nexport default \"https://cdn.jsdelivr.net/gh/twitter/twemoji@\".concat(version, \"/assets/\");","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/models/Post');","import twemoji from 'twemoji';\nimport { override } from 'flarum/common/extend';\nimport Post from 'flarum/common/models/Post';\nimport base from './cdn';\nconst options = {\n  base,\n  attributes: () => ({\n    loading: 'lazy'\n  })\n};\n\n/**\n * Parses an HTML string into a `<body>` node containing the HTML content.\n *\n * Vanilla JS implementation of jQuery's `$.parseHTML()`,\n * sourced from http://youmightnotneedjquery.com/\n */\nfunction parseHTML(str) {\n  const tmp = document.implementation.createHTMLDocument();\n  tmp.body.innerHTML = str;\n  return tmp.body;\n}\nexport default function renderEmoji() {\n  override(Post.prototype, 'contentHtml', function (original) {\n    const contentHtml = original();\n    if (this.oldContentHtml !== contentHtml) {\n      // We need to parse the HTML string into a DOM node, then give it to Twemoji.\n      //\n      // This prevents some issues with the default find-replace that would be performed\n      // on a string passed to `Twemoji.parse()`.\n      //\n      // The parse function can only handle a single DOM node provided, so we need to\n      // wrap it in a node. In our `parseHTML` implementation, we wrap it in a `<body>`\n      // element. This gets stripped below.\n      //\n      // See https://github.com/flarum/core/issues/2958\n      const emojifiedDom = twemoji.parse(parseHTML(contentHtml), options);\n\n      // Steal the HTML string inside the emojified DOM `<body>` tag.\n      this.emojifiedContentHtml = emojifiedDom.innerHTML;\n      this.oldContentHtml = contentHtml;\n    }\n    return this.emojifiedContentHtml;\n  });\n  override(s9e.TextFormatter, 'preview', (original, text, element) => {\n    original(text, element);\n    twemoji.parse(element, options);\n  });\n}","import app from 'flarum/forum/app';\nimport addComposerAutocomplete from './addComposerAutocomplete';\nimport renderEmoji from './renderEmoji';\napp.initializers.add('flarum-emoji', () => {\n  // After typing ':' in the composer, show a dropdown suggesting a bunch of\n  // emoji that the user could use.\n  addComposerAutocomplete();\n\n  // render emoji as image in Posts content and title.\n  renderEmoji();\n});","import emojiMap from 'simple-emoji-map';\nimport { extend } from 'flarum/common/extend';\nimport TextEditor from 'flarum/common/components/TextEditor';\nimport TextEditorButton from 'flarum/common/components/TextEditorButton';\nimport KeyboardNavigatable from 'flarum/common/utils/KeyboardNavigatable';\nimport AutocompleteDropdown from './fragments/AutocompleteDropdown';\nimport getEmojiIconCode from './helpers/getEmojiIconCode';\nimport cdn from './cdn';\nexport default function addComposerAutocomplete() {\n  const emojiKeys = Object.keys(emojiMap);\n  const $container = $('<div class=\"ComposerBody-emojiDropdownContainer\"></div>');\n  const dropdown = new AutocompleteDropdown();\n  extend(TextEditor.prototype, 'oncreate', function () {\n    const $editor = this.$('.TextEditor-editor').wrap('<div class=\"ComposerBody-emojiWrapper\"></div>');\n    this.navigator = new KeyboardNavigatable();\n    this.navigator.when(() => dropdown.active).onUp(() => dropdown.navigate(-1)).onDown(() => dropdown.navigate(1)).onSelect(dropdown.complete.bind(dropdown)).onCancel(dropdown.hide.bind(dropdown)).bindTo($editor);\n    $editor.after($container);\n  });\n  extend(TextEditor.prototype, 'buildEditorParams', function (params) {\n    let relEmojiStart;\n    let absEmojiStart;\n    let typed;\n    const applySuggestion = replacement => {\n      this.attrs.composer.editor.replaceBeforeCursor(absEmojiStart - 1, replacement + ' ');\n      dropdown.hide();\n    };\n    params.inputListeners.push(() => {\n      const selection = this.attrs.composer.editor.getSelectionRange();\n      const cursor = selection[0];\n      if (selection[1] - cursor > 0) return;\n\n      // Search backwards from the cursor for an ':' symbol. If we find\n      // one and followed by a whitespace, we will want to show the\n      // autocomplete dropdown!\n      const lastChunk = this.attrs.composer.editor.getLastNChars(15);\n      absEmojiStart = 0;\n      for (let i = lastChunk.length - 1; i >= 0; i--) {\n        const character = lastChunk.substr(i, 1);\n        // check what user typed, emoji names only contains alphanumeric,\n        // underline, '+' and '-'\n        if (!/[a-z0-9]|\\+|\\-|_|\\:/.test(character)) break;\n        // make sure ':' preceded by a whitespace or newline\n        if (character === ':' && (i == 0 || /\\s/.test(lastChunk.substr(i - 1, 1)))) {\n          relEmojiStart = i + 1;\n          absEmojiStart = cursor - lastChunk.length + i + 1;\n          break;\n        }\n      }\n      dropdown.hide();\n      dropdown.active = false;\n      if (absEmojiStart) {\n        typed = lastChunk.substring(relEmojiStart).toLowerCase();\n        const makeSuggestion = function (_ref) {\n          let {\n            emoji,\n            name,\n            code\n          } = _ref;\n          return m(\"button\", {\n            key: emoji,\n            onclick: () => applySuggestion(emoji),\n            onmouseenter: function () {\n              dropdown.setIndex($(this).parent().index() - 1);\n            }\n          }, m(\"img\", {\n            alt: emoji,\n            className: \"emoji\",\n            draggable: \"false\",\n            loading: \"lazy\",\n            src: \"\".concat(cdn, \"72x72/\").concat(code, \".png\")\n          }), name);\n        };\n        const buildSuggestions = () => {\n          const similarEmoji = [];\n\n          // Build a regular expression to do a fuzzy match of the given input string\n          const fuzzyRegexp = function (str) {\n            const reEscape = new RegExp('\\\\(([' + '+.*?[]{}()^$|\\\\'.replace(/(.)/g, '\\\\$1') + '])\\\\)', 'g');\n            return new RegExp('(.*)' + str.toLowerCase().replace(/(.)/g, '($1)(.*?)').replace(reEscape, '(\\\\$1)') + '$', 'i');\n          };\n          const regTyped = fuzzyRegexp(typed);\n          let maxSuggestions = 7;\n          const findMatchingEmojis = matcher => {\n            for (let i = 0; i < emojiKeys.length && maxSuggestions > 0; i++) {\n              const curEmoji = emojiKeys[i];\n              if (similarEmoji.indexOf(curEmoji) === -1) {\n                const names = emojiMap[curEmoji];\n                for (let name of names) {\n                  if (matcher(name)) {\n                    --maxSuggestions;\n                    similarEmoji.push(curEmoji);\n                    break;\n                  }\n                }\n              }\n            }\n          };\n\n          // First, try to find all emojis starting with the given string\n          findMatchingEmojis(emoji => emoji.indexOf(typed) === 0);\n\n          // If there are still suggestions left, try for some fuzzy matches\n          findMatchingEmojis(emoji => regTyped.test(emoji));\n          const suggestions = similarEmoji.map(emoji => ({\n            emoji,\n            name: emojiMap[emoji][0],\n            code: getEmojiIconCode(emoji)\n          })).map(makeSuggestion);\n          if (suggestions.length) {\n            dropdown.items = suggestions;\n            m.render($container[0], dropdown.render());\n            dropdown.show();\n            const coordinates = this.attrs.composer.editor.getCaretCoordinates(absEmojiStart);\n            const width = dropdown.$().outerWidth();\n            const height = dropdown.$().outerHeight();\n            const parent = dropdown.$().offsetParent();\n            let left = coordinates.left;\n            let top = coordinates.top + 15;\n\n            // Keep the dropdown inside the editor.\n            if (top + height > parent.height()) {\n              top = coordinates.top - height - 15;\n            }\n            if (left + width > parent.width()) {\n              left = parent.width() - width;\n            }\n\n            // Prevent the dropdown from going off screen on mobile\n            top = Math.max(-(parent.offset().top - $(document).scrollTop()), top);\n            left = Math.max(-parent.offset().left, left);\n            dropdown.show(left, top);\n          }\n        };\n        buildSuggestions();\n        dropdown.setIndex(0);\n        dropdown.$().scrollTop(0);\n        dropdown.active = true;\n      }\n    });\n  });\n  extend(TextEditor.prototype, 'toolbarItems', function (items) {\n    items.add('emoji', m(TextEditorButton, {\n      onclick: () => this.attrs.composer.editor.insertAtCursor(' :'),\n      icon: \"far fa-smile\"\n    }, app.translator.trans('flarum-emoji.forum.composer.emoji_tooltip')));\n  });\n}"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","reg","_typeof","iterator","constructor","_defineProperty","arg","input","hint","prim","toPrimitive","undefined","res","TypeError","String","toPropertyKey","configurable","writable","AutocompleteDropdown","super","arguments","this","view","m","className","app","translator","trans","items","map","item","attrs","show","left","top","$","css","active","hide","navigate","delta","keyWasJustPressed","setIndex","index","clearTimeout","keyWasJustPressedTimeout","setTimeout","complete","eq","find","click","scrollToItem","$dropdown","$items","rangedIndex","length","$item","removeClass","addClass","dropdownScroll","scrollTop","dropdownTop","offset","dropdownBottom","outerHeight","itemTop","itemBottom","parseInt","stop","animate","add","twemoji","base","ext","size","convert","fromCodePoint","codepoint","code","fromCharCode","toCodePoint","onerror","parentNode","replaceChild","createText","alt","parse","what","how","callback","parseString","parseNode","defaultImageSrcGenerator","attributes","returnNull","folder","replace","test","text","re","lastIndex","result","escaper","UFE0Fg","U200D","rescaper","shouldntBeParsed","clean","document","createTextNode","icon","options","concat","grabAllTextNodes","node","allText","subnode","nodeType","childNodes","push","nodeName","toLowerCase","grabTheRightIcon","rawText","indexOf","attrib","attrname","modified","fragment","match","i","img","iconId","src","createDocumentFragment","nodeValue","exec","appendChild","slice","Image","setAttribute","hasAttribute","str","ret","replacer","unicodeSurrogates","sep","r","c","p","charCodeAt","toString","join","getEmojiIconCode","emoji","version","loading","emojiKeys","keys","$container","dropdown","extend","$editor","wrap","navigator","when","onUp","onDown","onSelect","bind","onCancel","bindTo","after","params","relEmojiStart","absEmojiStart","typed","applySuggestion","replacement","composer","editor","replaceBeforeCursor","inputListeners","selection","getSelectionRange","cursor","lastChunk","getLastNChars","character","substr","substring","makeSuggestion","_ref","name","onclick","onmouseenter","parent","draggable","cdn","similarEmoji","regTyped","reEscape","RegExp","fuzzyRegexp","maxSuggestions","findMatchingEmojis","matcher","curEmoji","names","suggestions","render","coordinates","getCaretCoordinates","width","outerWidth","height","offsetParent","Math","max","buildSuggestions","insertAtCursor","addComposerAutocomplete","override","original","contentHtml","oldContentHtml","emojifiedDom","tmp","implementation","createHTMLDocument","body","innerHTML","parseHTML","emojifiedContentHtml","s9e","TextFormatter","element"],"sourceRoot":""}